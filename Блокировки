https://helperp.ru/articles/35-blokirovki?ysclid=lx0ak3aje443889603

УстановитьЗначение - когда 1 элемент например склад(основной)
ИсточникДанных - когда много значений (товары)

Для такой записи
ЭлементБлокировки.ИсточникДанных = СписокТоваров;
ЭлементБлокировки.ИспользоватьИзИсточникаДанных("Товар", "Товар");
Поля  в регистре и документе должны совпадать так как первое поле берется из регистра, а второе из дока

Блокировки идут только по Измерениям регистра, а не по ресурсам

// Пример блокировки - склада нет - есть товары и сроки годности,
 но так как сроков годности нет в документе то строчка будет одна с товарами, иначе дублируем и вставляем сроки годности
Движения.ОстаткиТоваров.Записывать = Истина; 
		
	Блокировка = Новый БлокировкаДанных;
	ЭлементБлокировки = Блокировка.Добавить("РегистрНакопления.ОстаткиТоваров");      
	ЭлементБлокировки.Режим = РежимБлокировкиДанных.Исключительный;   	
	ЭлементБлокировки.ИсточникДанных = СписокТоваров;
	ЭлементБлокировки.ИспользоватьИзИсточникаДанных("Товар", "Товар");
	
	Блокировка.Заблокировать();

